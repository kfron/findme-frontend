<ActivityIndicator [busy]="isBusy"></ActivityIndicator>

<FlexboxLayout *ngIf="!isBusy" class="flex-container">
    <StackLayout class="stack-top-container">
        <FlexboxLayout class="flex-top-btn-container">
            <Button class="sort-btn" [color]="sortByDate ? (sortByDateAsc ? 'green' : 'red') : ''" text="Sort by date"
                (tap)="onSortByDateTap()"></Button>
            <Button class="sort-btn" [color]="sortByProximity ? (sortByProximityAsc ? 'green' : 'red') : ''"
                text="Sort by proximity" (tap)="onSortByProximityTap()"></Button>
            <Button class="sort-btn" [color]="sortByAge ? (sortByAgeAsc ? 'green' : 'red') : ''" text="Sort by age"
                (tap)="onSortByAgeTap()"></Button>
        </FlexboxLayout>
        <Button class="toggle-radius-btn" [text]="toggleRadiusText" (tap)="onToggleRadiusTapped()"></Button>
    </StackLayout>
    <FlexboxLayout class="empty-label-container">
        <Label class="empty-label" *ngIf="ads.length === 0" [text]="emptyText"></Label>
    </FlexboxLayout>
    <RadListView [items]="ads" (itemTap)="onAdItemTap($event)" class="ads-list">
        <ng-template tkListItemTemplate let-ad="item">
            <StackLayout class="ad-item-container">
                <ng-container *ngIf="ad !== undefined">
                    <GridLayout class="ad-info" rows="*" columns="*,*,3*,2*">
                        <Label [text]="ad?.name" col="0"></Label>
                        <Label [text]="ad?.age" col="1"></Label>
                        <Label [text]="ad.found_at | timeSinceDate" col="2"></Label>
                        <Label [text]="ad.lastKnownPosition | distanceFrom: currentPosition" col="3"></Label>
                    </GridLayout>
                    <Image class="ad-image" [src]="ad?.image" height=300px stretch="aspectFill" lodeMode="async">
                    </Image>
                </ng-container>
            </StackLayout>
        </ng-template>
    </RadListView>
    <FlexboxLayout class="flex-bot-btn-container">
        <Button class="test-button" text="Map" (tap)="onMapButtonTap()"></Button>
        <Button class="test-button" text="Add" (tap)="createNewAd()"></Button>
    </FlexboxLayout>
</FlexboxLayout>